<style>
    #header ul li .header_content {
        transition: opacity 200ms cubic-bezier(0, 0, 0.2, 1);
        opacity: 0;
    }
    #header ul li:hover .header_content {
        opacity: 1;
    }
    #header ul li .dropdown-menu {
        transition: all 200ms cubic-bezier(0, 0, 0.2, 1);
        overflow: hidden;
        max-height: 0;
    }
    #header ul li:hover .dropdown-menu {
        visibility: visible;
        max-height: 800px;
    }

    .stickyHeader {
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 9995;
        float:left;
        transition: all 0.3s ease-out;
    }

    .content {
         padding-top: 64px;
    }
</style>

<div class="absolute w-full">
  <div class="w-full bg-black bg-opacity-40 absolute top-0 left-0 right-0 bottom-0 h-screen hidden overlaySearch" style="z-index: 5;"></div>
  <div class="bg-white relative z-10 header">
    <div class="grid grid-cols-3 2xl:container 2xl:mx-auto px-4 2xl:px-0 items-center">
      <nav class="flex h-full items-center justify-start">
        <ul class="hidden lg:flex h-full">

          {% for link in linklists[section.settings.header_main_menu].links %}
            <li>
              <a class="flex items-center body-md px-4 space-x-1 h-full truncate" href="{{ link.url }}"><p>{{ link.title }}</p>
              {% if link.links != blank %}
                  {% if linklists[section.settings.header_main_menu].levels > 1 %}
                      <span class="icon icon-chevron-down"></span>
                  {% endif %}
              {% endif %}
              </a> 

              {% if link.links != blank %}
              <div class="bg-white shadow-md absolute invisible z-50 dropdown-menu w-60 {% if link.links.size > 1 and link.levels > 1 %} left-0 w-full{% endif %}">
                    <div class="max-width mx-auto grid grid-cols-2 py-4 {% if link.links.size > 1 and link.levels > 1 %}py-8{% endif %} {% if link.levels == 1 %} flex-col px-4 {% else %} space-x-4{% endif %} w-full header_content">
                        <div class="grid gap-5 {% if link.links.size == 1 %} grid-cols-1 {% elsif link.links.size == 2 %} grid-cols-2 {% elsif link.links.size == 3 %} grid-cols-3 {% elsif link.links.size >= 4 %} grid-cols-4 {% elsif link.links.size == 5 %} grid-cols-5 {% elsif link.links.size == 6 %} grid-cols-6 {% endif %}">
                        {% for child_link in link.links %}
                        {% if child_link.links == blank %}
                        <div class="w-full py-1.5">
                            <a href="{{ child_link.url }}" class="body-md">{{ child_link.title }}</a>
                        </div>
                        {% else %}
                        <div class="">
                            <a href="{{ child_link.url }}" class="font-semibold heading-xs">{{ child_link.title }}</a>
                            {% if child_link.links != blank %}
                            <ul class="grandchild body-md space-y-2 mt-4">
                            {% for grandchild_link in child_link.links %} 
                            <li class="block">
                                <a href="{{ grandchild_link.url }}">{{ grandchild_link.title }}</a>
                            </li>
                            {% endfor %}
                            </ul>
                            {% endif %}
                        </div>
                        {% endif %}
                        {% endfor %}
                        </div>
                        {% unless link.levels == 1 %}
                        <div class="grid gap-5 grid-cols-2">
                            <div class="image">
                                <a href="">
                                    <div class="aspect-w-4 aspect-h-5"><img src="//cdn.shopify.com/s/files/1/0534/1744/3492/collections/grain-lamp-jens-fager-muuto__150.jpg?v=1615139001" alt=""></div>
                                </a>
                                <p class="body-md py-4">
                                    <a href="">Get 15% with code "COOK15"</a>
                                </p>
                            </div>
                            <div class="image">
                                <a href="">
                                    <div class="aspect-w-4 aspect-h-5"><img src="//cdn.shopify.com/s/files/1/0534/1744/3492/collections/cbd_812929cf-5c9f-41e0-ba4a-47a1e94be2b7.jpg?v=1615063701" alt=""></div>
                                </a>
                                <p class="body-md py-4">
                                    <a href="">Browse our new bed & bath arrivals</a>
                                </p>
                            </div>
                        </div>
                        {% endunless %}
                    </div>
              </div>
              {% endif %}
            </li>
          {% endfor %}
        </ul>

        
        <div class="navSidebarMenu w-6 h-6 lg:hidden">
        <a href="#" id="toggleSidebar"><span aria-hidden="true" class="text-2xl icon icon-menu"></span></a>
        </div>
      

      </nav>
      <div class="flex text-2xl font-semibold justify-center">
        <a class="py-4" href="/">
          {% if section.settings.logo != blank %}
            <img class="object-cover" style="height: {{ section.settings.header_logo_height }}px;" src="{{ section.settings.header_logo | img_url: '200x200' }}" alt="{{ shop.name }}">
          {% elsif section.settings.logo == blank %}
            {{ shop.name }}
          {% endif %}
        </a>
      </div>
      <div class="flex justify-end space-x-4">
        <div class="search flex {% if section.settings.show_search == true %} flex {% elsif section.settings.show_search == false %} hidden {% endif %}">
          <span class="text-2xl icon icon-search" aria-hidden="true"></span>
        </div>
        <div class="my-account hidden lg:flex">
          {% if shop.customer_accounts_enabled %}
            {% if customer %}
              <a href="{{ routes.account_url }}">
                <span class="text-2xl icon icon-user" aria-hidden="true"></span>
              </a>
            {% else %}
              <a href="{{ routes.account_login_url }}">
                <span class="text-2xl icon icon-user" aria-hidden="true"></span>
              </a>
            {% endif %}
          {% endif %}
        </div>

        
        
        <div class="cart" data-cart-view>
          <a href="{% if settings.cart_type == 'cart_type_page' %}/cart{% endif %}"{% if settings.cart_type == 'cart_type_drawer' %}@click.prevent="cartOpen = true"{% endif %}class="flex space-x-4">
            <span class="text-2xl icon icon-shopping-cart" aria-hidden="true"></span>
          </a>
          
        </div>
      </div>
    </div>
    
  </div>
  <!-- End of Header -->

</div>

{% schema %}
{
    "name": "Header",
    "settings": [
        {
            "type": "image_picker",
            "id": "header_logo",
            "label": "Logo"
        },
        {
            "type": "range",
            "id": "header_logo_height",
            "label": "Logo height",
            "unit": "px",
            "min": 40,
            "max": 100,
            "step": 1,
            "default": 40
        },
        {
            "type": "header",
            "content": "Layout" 
        },
        {
            "type": "checkbox",
            "id": "header_sticky_enable",
            "label": "Enable sticky header",
            "default": true
        },
        {
            "type": "select",
            "id": "header_width",
            "label": "Section width",
            "options": [
                {
                    "value": "full-width",
                    "label": "Full width"
                },
                {
                    "value": "content-width",
                    "label": "Content width"
                }
            ]
        },
        {
            "type": "header",
            "content": "Navigation"
        },
        {
            "type": "link_list",
            "id": "header_main_menu",
            "label": "Select menu",
            "default": "main-menu"
        },
        {
            "type": "header",
            "content": "Search"
        },
        {
            "type": "checkbox",
            "id": "header_search_activate",
            "label": "Activate search",
            "default": true
        },
        {
            "type": "checkbox",
            "id": "header_search_live_activate",
            "label": "Activate live search",
            "default": true
        },
        {
            "type": "checkbox",
            "id": "header_search_quick_links_activate",
            "label": "Activate quick links",
            "default": false
        },
        {
            "type": "text",
            "id": "header_search_quick_links_heading",
            "label": "Quick links heading",
            "default": "Suggestion"
        },
        {
            "type": "link_list",
            "id": "header_search_quick_links",
            "label": "Quick links menu"
        }
    ],
    "max_blocks": 6,
    "blocks": [
        {
            "type": "megamenu_image",
            "name": "Image",
            "limit": 6,
            "settings": [
                {
                    "type": "text",
                    "id": "header_megamenu_image_trigger",
                    "label": "Menu trigger"
                },
                {
                    "type": "header",
                    "content": "Image 1"
                },
                {
                    "type": "image_picker",
                    "id": "header_megamenu_image_1",
                    "label": "Image"
                },
                {
                    "type": "select",
                    "id": "header_megamenu_image_size_1",
                    "label": "Image size",
                    "options": [
                        {
                            "value": "small",
                            "label": "Small"
                        },
                        {
                            "value": "medium",
                            "label": "Medium"
                        },
                        {
                            "value": "large",
                            "label": "Large"
                        }
                    ]
                }, 
                {
                    "type": "url",
                    "id": "header_megamenu_image_url_1",
                    "label": "Image URL"
                },
                {
                    "type": "select",
                    "id": "header_megamenu_image_position_1",
                    "label": "Position",
                    "options": [
                        {
                            "value": "first-column",
                            "label": "First column"
                        },
                        {
                            "value": "last-column",
                            "label": "Last column"
                        }
                    ]
                },
                {
                    "type": "text",
                    "id": "header_megamenu_image_text_1",
                    "label": "Text"
                },
                {
                    "type": "header",
                    "content": "Image 2"
                },
                {
                    "type": "image_picker",
                    "id": "header_megamenu_image_2",
                    "label": "Image"
                },
                {
                    "type": "select",
                    "id": "header_megamenu_image_size_2",
                    "label": "Image size",
                    "options": [
                        {
                            "value": "small",
                            "label": "Small"
                        },
                        {
                            "value": "medium",
                            "label": "Medium"
                        },
                        {
                            "value": "large",
                            "label": "Large"
                        }
                    ]
                },
                {
                    "type": "url",
                    "id": "header_megamenu_image_url_2",
                    "label": "Image URL"
                },
                {
                    "type": "select",
                    "id": "header_megamenu_image_position_2",
                    "label": "Position",
                    "options": [
                        {
                            "value": "first-column",
                            "label": "First column"
                        },
                        {
                            "value": "last-column",
                            "label": "Last column"
                        }
                    ]
                },
                {
                    "type": "text",
                    "id": "header_megamenu_image_text_2",
                    "label": "Text"
                }
            ]
        },
        {
            "type": "megamenu_multi_column",
            "name": "Multi column",
            "limit": 6,
            "settings": [
                {
                    "type": "text",
                    "id": "header_megamenu_multi_column_trigger",
                    "label": "Menu trigger"
                },
                {
                    "type": "range",
                    "id": "header_megamenu_multi_column_number",
                    "label": "Number of columns",
                    "min": 2,
                    "max": 6,
                    "step": 1,
                    "default": 3
                }
            ]
        }
    ]
}
{% endschema %}